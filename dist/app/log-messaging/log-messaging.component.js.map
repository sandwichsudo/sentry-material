{"version":3,"file":"log-messaging.component.js","sourceRoot":"","sources":["log-messaging.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { RouteParams } from '@angular/router-deprecated';\nimport { Router } from '@angular/router-deprecated';\nimport { Log } from '../log/log';\nimport { LogService } from '../log.service/log.service';\nimport { NotificationService } from '../notification.service/notification.service';\n\n// material directives\nimport {MD_CARD_DIRECTIVES} from '@angular2-material/card';\nimport { MD_BUTTON_DIRECTIVES } from '@angular2-material/button';\nimport {MdIcon, MdIconRegistry} from '@angular2-material/icon';\nimport {MD_CHECKBOX_DIRECTIVES, MdCheckboxChange} from '@angular2-material/checkbox';\nimport {MD_INPUT_DIRECTIVES} from '@angular2-material/input';\n\n@Component({\n  selector: 'log-messaging',\n  styleUrls: ['./app/log-messaging/log-messaging.component.css'],\n  templateUrl: './app/log-messaging/log-messaging.component.html',\n  directives: [MD_CARD_DIRECTIVES, MD_BUTTON_DIRECTIVES, MdIcon, MD_CHECKBOX_DIRECTIVES,MD_INPUT_DIRECTIVES],\n  providers: [MdIconRegistry,\n    LogService]\n\n})\nexport class LogMessagingComponent implements OnInit {\n  log: Log;\n  emailTo: string;\n  emailBody: string;\n  emailSubject: string;\n  canSend: boolean = true;\n  public mailtoHref = ``;\n\n  public contacts = [{\n    checked: new MdCheckboxChange(),\n    email:'email@email.com',\n    id:0\n  },{\n    checked:new MdCheckboxChange(),\n    email:'email1@email.com',\n    id:1\n  },{\n    checked:new MdCheckboxChange(),\n    email:'email2@email.com',\n    id:2\n  }];\n\n  updateEmailTo($event, contact) {\n    this.setMailCC($event, contact);\n    this.setMailtoMessage();\n  }\n  setMailCC($event, changedContact) {\n    this.emailTo='';\n    let count =0;\n    for(let i=0; i<this.contacts.length; i++){\n        let contact = this.contacts[i];\n        if(((contact.id == changedContact.id) && $event) || ((contact.id != changedContact.id) && contact.checked)){\n            this.emailTo += `${contact.email},`;\n            count++;\n        }\n    }\n    this.emailTo = this.emailTo.slice(0,-1);\n    this.setButtonStatus(count>0);\n  }\n  setButtonStatus(isEnabled){\n    this.canSend = isEnabled;\n  }\n  constructor(\n    private logService: LogService,\n    private routeParams: RouteParams,\n    private notificationService: NotificationService,\n    private router: Router) {\n  }\n  goToDetail(log: Log) {\n    let link = ['LogDetail', { id: log.id }];\n    this.router.navigate(link);\n  }\n  ngOnInit() {\n    let id = +this.routeParams.get('id');\n    this.logService.getLog(id)\n      .then(log => {\n        this.log = new Log(log);\n        this.setOperatorMessage();\n        this.setMailtoMessage();\n    });\n  }\n  setOperatorMessage() {\n    this.emailBody = `At timestamp ${new Date()}, ${this.log.name} experienced the following issue:\n${this.log.getStatusMessage()}.\nAs stated by chrome policy, this will result in this log no longer being trusted.`;\n    this.emailSubject= encodeURIComponent(`${this.log.name}:${this.log.getStatusMessage()}.`);\n  }\n  setMailtoMessage(){\n    this.mailtoHref = `mailto:${this.emailTo}?subject=${this.emailSubject}&body=${encodeURIComponent(this.emailBody)}`;\n  }\n\n}\n"]}